<!DOCTYPE html>
<html>

<head>
    <title>Songs Page</title>
    <style>
        .song {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .song img {
            margin-right: 10px;
        }

        .song button {
            margin-left: 10px;
        }
    </style>
</head>

<body>
    <div id="songs">
        <!-- {% for song in songs %} -->
        <div class="song">
            <img src="{{ song.image_url }}" alt="{{ song.title }}">
            <div>{{ whfcowhoc }} - {{ dwwhih }}</div>
            <button class="add-to-playlist" data-song-id="1">Add to Playlist</button>
        </div>
        <!-- {% endfor %} -->
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        $(function () {
            // Get all the "Add to Playlist" buttons
            const addToPlaylistButtons = $('.add-to-playlist');

            // Attach a click event listener to each button
            addToPlaylistButtons.each(function () {
                const button = $(this);
                button.on('click', function () {
                    // Get the song ID from the button's data attribute
                    const songId = button.data('song-id');

                    // Send an AJAX request to add the song to the playlist
                    $.ajax({
                        url: '/add-to-playlist',
                        type: 'POST',
                        contentType: 'application/json',
                        data: JSON.stringify({ 'song_id': songId }),
                        success: function (data) {
                            alert(data.message);
                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                            console.log('Error:', errorThrown);
                        }
                    });
                });
            });
        });
    </script>
</body>

</html>